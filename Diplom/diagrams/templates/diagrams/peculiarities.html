<!DOCTYPE html>
<html lang="ru" id="htmlLang">
<head>
    <meta charset="UTF-8">
    <title>Особенности</title>
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #c4dfe6;
            color: #000;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        body.dark-theme {
            background-color: #333;
            color: #FFF;
        }
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #333;
            color: white;
            padding: 10px 20px;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
        }
        .right {
            margin-left: 600px;
        }
        .icon {
            display: flex;
            gap: 10px;
        }
        .small-image {
            width: 50px;
            height: auto;
            cursor: pointer;
        }
        header h1 {
            margin: 0;
            padding-right: 20px;
            font-family: 'Georgia', serif;
        }
        nav {
            display: flex;
            gap: 10px;
        }
        nav a {
            color: white;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 4px;
            transition: all 0.3s ease;
            position: relative;
        }
        nav a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        nav a::after {
            content: "";
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: #66a5ad;
            transition: width 0.3s ease;
        }
        nav a:hover::after {
            width: 100%;
        }
        .container {
            display: flex;
            gap: 20px;
            max-width: 100%;
            max-height: 650px;
            margin: 80px 20px 20px;
            padding: 10px;
            box-sizing: border-box;
        }
        .list {
            flex: 0 0 30%;
            background-color: #fff;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
        }
        .list ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .list li {
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            border-radius: 10px;
        }
        .list li:hover {
            background-color: #f1f1f1;
        }
        .list li.active {
            background-color: #66a5ad;
            color: white;
        }
        .content {
            flex: 1;
            background-color: #fff;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
            overflow-y: auto;
            height: 700px;
        }
        .content div {
            display: none;
            margin: 0;
            padding: 10px;
        }
        .content div.active {
            display: block;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        /* Стили для выпадающего меню аккаунта */
        .account-dropdown {
            position: relative;
            display: inline-block;
            margin-right: 15px;
        }

        .account-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px 15px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            transition: background-color 0.3s;
            margin-left: 200px;
        }

        .account-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .account-icon {
            margin-right: 8px;
            font-size: 16px;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: #fff;
            min-width: 120px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            border-radius: 4px;
            padding: 10px 0;
        }

        .account-dropdown:hover .dropdown-content {
            display: block;
        }

        .account-header {
            padding: 8px 16px;
            font-weight: bold;
            border-bottom: 1px solid #eee;
            margin-bottom: 8px;
        }

        .dropdown-content a {
            display: block;
            padding: 8px 16px;
            text-decoration: none;
            color: #ffffff;
            transition: background-color 0.3s;
        }

        .dropdown-content a:hover {
            background-color: #f5f5f5;
        }

        .dropdown-divider {
            height: 1px;
            background-color: #eee;
            margin: 8px 0;
        }

        .dropdown-section {
            padding: 8px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .dropdown-section select {
            padding: 4px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        .logout-btn {
            color: #e74c3c !important;
        }

        .account-header .username {
            color: #333;
            /* Основной цвет текста */
            font-size: 16px;
            display: block;
        }

        /* Общий стиль текста в выпадающем меню */
        .dropdown-content {
            color: #333;
            /* Цвет текста по умолчанию */
        }

        /* Стиль для ссылок в меню */
        .dropdown-content a {
            color: #333;
            /* Цвет текста ссылок */
        }

        /* Стиль для текста в секциях (Язык, Тема) */
        .dropdown-section span {
            color: #333;
            /* Цвет текста меток */
        }

        /* Стиль для выпадающих списков */
        .dropdown-section select {
            color: #333;
            /* Цвет текста в select */
        }

        /* Стиль для кнопки выхода */
        .logout-btn {
            color: #e74c3c !important;
            /* Красный цвет для кнопки выхода */
        }
        #supportButton {
            background-color: #66a5ad;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin-left: 10px;
            transition: background-color 0.3s ease;
            margin-left: 400px;
        }

        #supportButton:hover {
            background-color: #07575b;
        }

        /* Стили для боковой панели с чатом */
        #chat-sidebar {
            position: fixed;
            top: 0;
            right: -20%;
            /* Скрываем панель за пределами экрана */
            width: 20%;
            height: 100%;
            background-color: #f4f4f4;
            box-shadow: -2px 0 5px rgba(0, 0, 0, 0.1);
            transition: right 0.3s ease;
            z-index: 1001;
        }

        #chat-sidebar.active {
            right: 0;
            /* Показываем панель */
        }

        /* Стили для чата внутри панели */
        #chat {
            padding: 20px;
            height: 90%;
            display: flex;
            flex-direction: column;
        }

        #chat-log {
            flex-grow: 1;
            overflow-y: auto;
            margin-bottom: 10px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }

        #chat-message-input {
            width: 90%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        #chat-message-submit {
            background-color: #66a5ad;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #chat-message-submit2 {
            background-color: #66a5ad;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 10px;
        }

        #chat-message-submit:hover {
            background-color: #07575b;
        }

        /*для темной темы*/
        /* Темная тема */
body.dark-theme {
    background-color: #333;
    color: #FFF;
}

body.dark-theme .list,
body.dark-theme .content {
    background-color: #444;
    color: #FFF;
}

body.dark-theme .list li:hover {
    background-color: #555;
}

body.dark-theme .list li.active {
    background-color: #66a5ad;
}

body.dark-theme .dropdown-content {
    background-color: #444;
    color: #FFF;
}

body.dark-theme .dropdown-content a {
    color: #FFF;
}

body.dark-theme .dropdown-content a:hover {
    background-color: #555;
}

body.dark-theme .dropdown-section span,
body.dark-theme .account-header .username {
    color: #FFF;
}

body.dark-theme .dropdown-section select {
    background-color: #555;
    color: #FFF;
    border-color: #666;
}

body.dark-theme #chat-sidebar {
    background-color: #444;
}

body.dark-theme #chat-message-input {
    background-color: #555;
    color: #FFF;
    border-color: #666;
}
    </style>
    <script src="https://cdn.localazy.com/localazy.js"></script>
</head>
<body>
    <header>
        <h1>BPMN</h1>
        <div class="left">
            <nav class="nav-links">
                <a href="{% url 'main_menu' %}" id="mainMenuLink">Главная</a>
                <a href="{% url 'peculiarities' %}" id="peculiaritiesLink">Особенности</a>
                <a href="{% url 'templates' %}">Шаблоны</a>
                <a href="{% url 'solutions' %}" id="solutionsLink">Решения</a>
                <a href="{% url 'my_diagrams' %}" id="myDiagramsLink">Мои диаграммы</a>
            </nav>
        </div>
        <div class="right">
            <div class="account-dropdown">
                <button id="accountButton" class="account-btn">
                    <span class="account-text">Аккаунт</span>
                </button>
                <div class="dropdown-content">
                    <div class="account-header">
                        <span class="username">{{ username }}</span>
                    </div>
                    <a href="{% url 'my_diagrams' %}">Мои диаграммы</a>
                    <div class="dropdown-divider"></div>
                    <div class="dropdown-section">
                        <span> "Язык:" </span>
                        <select class="language-select">
                            <option value="ru">Русский</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    <div class="dropdown-section">
                        <span>Тема:</span>
                        <select class="theme-select">
                            <option value="light">Светлая</option>
                            <option value="dark">Темная</option>
                        </select>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a href="" class="logout-btn">Выйти</a>
                </div>
            </div>
            <button id="supportButton" onclick="toggleChat()">Тех. поддержка</button>
        </div>
    </header>
    <div class="container">
        <div class="list">
            <ul>
                <li data-target="text1" class="active" id="whatIsBPMN">Русская версия документации</li>
                <li data-target="text2" id="elementsOfBPMN">Английская версия документации</li>
            </ul>
        </div>
        <div class="content">
            <div id="text1" class="active">
                <p>{{ english_text|linebreaks }}</p>
            </div>
            <div id="text2">
                <p>{{ russian_text|linebreaks }}</p>
            </div>
        </div>
    </div>
    <!--чат-->
    <div id="chat-sidebar">
        <div id="chat">
            <div id="chat-log"></div>
            <input id="chat-message-input" type="text" placeholder="Введите сообщение...">
            <button id="chat-message-submit">Отправить</button>
            <button id="chat-message-submit2">Закрыть</button>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Объект с переводами для всех элементов страницы
    const translations = {
        'ru': {
            // Header
            'mainMenuLink': 'Главная',
            'peculiaritiesLink': 'Особенности',
            'templatesLink': 'Шаблоны',
            'solutionsLink': 'Решения',
            'myDiagramsLink': 'Мои диаграммы',
            'accountText': 'Аккаунт',
            'supportButton': 'Тех. поддержка',
            
            // Account dropdown
            'myDiagrams': 'Мои диаграммы',
            'language': 'Язык:',
            'theme': 'Тема:',
            'logout': 'Выйти',
            
            // Documentation tabs
            'russianDoc': 'Русская версия документации',
            'englishDoc': 'Английская версия документации',
            
            // Chat
            'chatPlaceholder': 'Введите сообщение...',
            'chatSend': 'Отправить',
            'chatClose': 'Закрыть'
        },
        'en': {
            // Header
            'mainMenuLink': 'Home',
            'peculiaritiesLink': 'Features',
            'templatesLink': 'Templates',
            'solutionsLink': 'Solutions',
            'myDiagramsLink': 'My Diagrams',
            'accountText': 'Account',
            'supportButton': 'Support',
            
            // Account dropdown
            'myDiagrams': 'My Diagrams',
            'language': 'Language:',
            'theme': 'Theme:',
            'logout': 'Logout',
            
            // Documentation tabs
            'russianDoc': 'Russian documentation',
            'englishDoc': 'English documentation',
            
            // Chat
            'chatPlaceholder': 'Type a message...',
            'chatSend': 'Send',
            'chatClose': 'Close'
        }
    };

    // Функция для обновления текста на странице
    function updateLanguage(lang) {
        const t = translations[lang];
        
        // Header
        document.getElementById('mainMenuLink').textContent = t.mainMenuLink;
        document.getElementById('peculiaritiesLink').textContent = t.peculiaritiesLink;
        document.querySelector('[href="{% url 'templates' %}"]').textContent = t.templatesLink;
        document.getElementById('solutionsLink').textContent = t.solutionsLink;
        document.getElementById('myDiagramsLink').textContent = t.myDiagramsLink;
        document.querySelector('.account-text').textContent = t.accountText;
        document.getElementById('supportButton').textContent = t.supportButton;
        
        // Account dropdown
        document.querySelector('.dropdown-content a[href="{% url 'my_diagrams' %}"]').textContent = t.myDiagrams;
        document.querySelectorAll('.dropdown-section span')[0].textContent = t.language;
        document.querySelectorAll('.dropdown-section span')[1].textContent = t.theme;
        document.querySelector('.logout-btn').textContent = t.logout;
        
        // Documentation tabs
        document.getElementById('whatIsBPMN').textContent = t.russianDoc;
        document.getElementById('elementsOfBPMN').textContent = t.englishDoc;
        
        // Chat
        document.getElementById('chat-message-input').placeholder = t.chatPlaceholder;
        document.getElementById('chat-message-submit').textContent = t.chatSend;
        document.getElementById('chat-message-submit2').textContent = t.chatClose;
        
        // Сохраняем выбор языка
        localStorage.setItem('userLanguage', lang);
        updateServerLanguage(lang);
    }

    // Отправка выбранного языка на сервер
    function updateServerLanguage(lang) {
        fetch('/set_language/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCookie('csrftoken'),
            },
            body: JSON.stringify({language: lang})
        }).catch(err => console.error('Language update error:', err));
    }

    // Получение CSRF токена
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    // Обработчик изменения языка
    const languageSelect = document.querySelector('.language-select');
    if (languageSelect) {
        // Устанавливаем сохраненный язык или язык по умолчанию
        const savedLang = localStorage.getItem('userLanguage') || 'ru';
        languageSelect.value = savedLang;
        updateLanguage(savedLang);
        
        // Обработчик изменения языка
        languageSelect.addEventListener('change', function() {
            updateLanguage(this.value);
        });
    }

    // Логика для переключения контента документации
    const listItems = document.querySelectorAll('.list li');
    const textElements = document.querySelectorAll('.content div');

    listItems.forEach(item => {
        item.addEventListener('click', () => {
            listItems.forEach(li => li.classList.remove('active'));
            textElements.forEach(div => div.classList.remove('active'));

            item.classList.add('active');
            const target = item.getAttribute('data-target');
            document.getElementById(target).classList.add('active');
        });
    });
});
//для темы
document.addEventListener('DOMContentLoaded', function() {
    // Функция для применения темы
    function applyTheme(theme) {
        if (theme === 'dark') {
            document.body.classList.add('dark-theme');
        } else {
            document.body.classList.remove('dark-theme');
        }
    }

    // Проверяем сохраненную тему в localStorage
    const savedTheme = localStorage.getItem('userTheme');
    if (savedTheme) {
        applyTheme(savedTheme);
        // Устанавливаем выбранную тему в селекторе
        document.querySelector('.theme-select').value = savedTheme;
    }

    // Проверяем тему в сессии (если пользователь авторизован)
    const username = document.getElementById('accountInfo')?.dataset?.username;
    if (username) {
        fetch('/get_user_theme/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCookie('csrftoken'),
            },
            body: JSON.stringify({username: username})
        })
        .then(response => response.json())
        .then(data => {
            if (data.theme) {
                applyTheme(data.theme);
                document.querySelector('.theme-select').value = data.theme;
                localStorage.setItem('userTheme', data.theme);
            }
        })
        .catch(err => console.error('Theme fetch error:', err));
    }

    // Обработчик изменения темы
    const themeSelect = document.querySelector('.theme-select');
    if (themeSelect) {
        themeSelect.addEventListener('change', function() {
            const selectedTheme = this.value;
            applyTheme(selectedTheme);
            localStorage.setItem('userTheme', selectedTheme);

            // Если пользователь авторизован, сохраняем тему на сервере
            if (username) {
                updateServerTheme(selectedTheme, username);
            }
        });
    }

    // Отправка выбранной темы на сервер
    function updateServerTheme(theme, username) {
        fetch('/update_theme/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCookie('csrftoken'),
            },
            body: JSON.stringify({
                theme: theme,
                username: username
            })
        }).catch(err => console.error('Theme update error:', err));
    }

    // Функция для получения CSRF токена
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
});
    </script>
</body>
</html>